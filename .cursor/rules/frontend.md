# Frontend Rules

## 基本方針

本プロジェクトのフロントエンドは **PoC / MVP 前提** とし、
UI 品質よりも **実装スピード・壊しやすさ・読みやすさ** を優先する。

* フロントエンドは **UI 表示とユーザー操作の制御に専念** する
* ビジネスロジックは極力バックエンドに寄せる
* 複雑な状態管理・最適化は行わない

---

## 技術前提

* React + TypeScript を前提とする
* ホスティングは **AWS Amplify Hosting**
* ビルド・デプロイは Amplify に完全委任する
* SSR は使用しない
* SSG（Next.js Static Export）は許可する
* 実行時にサーバーを必要としない構成を SPA 相当として扱う


---

## コンポーネント設計

* コンポーネントは **小さく・責務単位** で分ける
* UI 描画のみを行うコンポーネントを基本とする
* ロジックを持つ場合でも 1 画面 1 コンポーネント程度に留める

### 設計指針

* Presentational / Container の思想は意識するが、
  **厳密な分離は求めない**（過剰設計禁止）
* `props` は最小限にする
* JSX 内に複雑な条件分岐を書かない

---

## Hooks / 副作用の扱い

* 副作用（API 通信・タイマー・console 等）は hooks に閉じる
* `useEffect` は最小限にする
* 1 つの hooks に複数の責務を持たせない

---

## 状態管理

* 状態は以下の 2 種類に分けて考える

  * **UI 状態**（選択中・表示制御など）
  * **サーバー状態**（API から取得したデータ）

* サーバー状態は **API レイヤー経由** で取得する

* グローバル状態管理ライブラリは使用しない（MVPでは不要）

---

## API 連携ルール

* API 通信は `api/` ディレクトリに集約する
* コンポーネント内で直接 `fetch` を書かない
* API レスポンスは **必ずフロントエンド用の型に変換** してから使う
* エラーハンドリングは API 層で行う

---

## ディレクトリ構成指針（例）

```
src/
 ├─ pages/        # 画面単位
 ├─ components/   # 再利用 UI
 ├─ hooks/        # 副作用・状態取得
 ├─ api/          # API 通信
 ├─ types/        # 型定義
```

---

## 禁止事項

* API レスポンスをそのまま UI で使用すること
* 巨大な 1 ファイルコンポーネント
* 条件分岐だらけの JSX
* パフォーマンス最適化を目的とした premature optimization
* フロントエンドでのデータ永続化（localStorage 等）

---

## 逸脱禁止

本 Rules に反するフロントエンド構成・実装案を提案してはならない。
例外が必要な場合は **理由・影響・代替案** を明示すること。
