# TypeScript Rules

## 方針

本プロジェクトでは **PoC / MVP 前提** としつつ、
「型による事故防止」と「実装コスト最小」のバランスを重視する。

* `any` は原則禁止（やむを得ない場合は理由をコメントで明示）
* **型は先に書く**（実装よりも仕様を優先）
* 型で仕様・制約・前提条件を表現する
* 過剰な型体操・抽象化は行わない

---

## 基本ルール

* `unknown` は `any` より優先して使用する
* `as` による型アサーションは最小限にする
* `null` / `undefined` の混在を避ける（どちらかに統一）
* API 境界（外部入力・レスポンス）では必ず型を定義する

---

## 実装スタイル

* `class` は **状態を持つ必要がある場合のみ使用** する
* それ以外は関数ベースで実装する
* 関数はできる限り **純粋関数** とする
* 副作用（IO・fetch・console 等）は境界に寄せる

---

## 型定義に関するルール

* 型定義は `types/` ディレクトリに集約する
* フロントエンド / バックエンドで **共有できる型は共有する**
* API リクエスト / レスポンスの型は必ず定義する

例：

```ts
export type ExamType = 'FE' | 'AP'

export interface Question {
  id: string
  examType: ExamType
  text: string
  choices: string[]
  answerIndex: number
  explanation: string
}
```

---

## Utility Type の扱い

* `Pick` / `Omit` / `Partial` は積極的に使用してよい
* 条件型・再帰型など **可読性を下げる型表現は禁止**
* 型エイリアスは短く、意味が分かる名前を付ける

---

## エラーハンドリング

* `throw` するエラーの型・意味を明示する
* フロントエンドに返すエラーは構造化する
* `Error` をそのまま返さない

---

## 禁止事項

* `any` の安易な使用
* 意味のないジェネリクス
* 型安全性を犠牲にした短縮実装
* 実装を見ないと仕様が分からないコード

---

## 逸脱禁止

本 Rules に反する TypeScript 実装を提案してはならない。
例外が必要な場合は **理由と代替案** を明示すること。
