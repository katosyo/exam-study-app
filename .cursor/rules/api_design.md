# API Design Rules

## 目的

本プロジェクトの API は **PoC / MVP 用途** とし、
汎用性・拡張性よりも **分かりやすさ・実装コスト最小** を優先する。

* API はフロントエンド専用
* 外部公開・第三者利用は想定しない
* 将来拡張より「今すぐ作って壊せる」設計を重視する

---

## 基本方針

* REST API を前提とする
* エンドポイント数は最小限にする
* API 設計は **フロントエンドの画面構成から逆算** する
* 汎用 API / 抽象 API は作らない

---

## エンドポイント設計ルール

* MVP フェーズでは以下のみを許可する

| Method | Path       | 用途   |
| ------ | ---------- | ---- |
| GET    | /questions | 問題取得 |

* 追加エンドポイントは **必要性を明文化した上でのみ許可** する

---

## クエリパラメータ設計

* フロントエンド都合を優先する
* 必須パラメータと任意パラメータを明確に分ける

例：

```
GET /questions?exam=FE&limit=10
```

* `exam` : `FE` | `AP`（必須）
* `limit` : number（必須、最大値をバックエンドで制限）

---

## レスポンス設計

* レスポンスは **必ず JSON** とする
* フロントエンドでそのまま扱える形で返却する
* 不要なメタ情報は含めない

例：

```json
{
  "questions": [
    {
      "id": "FE-2023-01",
      "text": "〇〇について正しいものはどれか",
      "choices": ["A", "B", "C", "D"],
      "answerIndex": 2,
      "explanation": "〇〇の理由によりCが正しい"
    }
  ]
}
```

---

## エラーハンドリング

* HTTP ステータスコードを正しく使用する
* エラーレスポンスは構造化する

例：

```json
{
  "error": {
    "code": "INVALID_PARAMETER",
    "message": "exam must be FE or AP"
  }
}
```

* スタックトレースや内部情報を返却してはならない

---

## バリデーションルール

* 入力値検証は **必ず Lambda 側で行う**
* フロントエンドのバリデーションは補助的なものとする
* 不正値は 400 系エラーで返却する

---

## 禁止事項

* フロントエンド実装に依存しない汎用 API の作成
* 未使用パラメータの放置
* 意味の曖昧なフィールド名（data / info 等）
* レスポンス構造の場当たり的変更

---

## 逸脱禁止

本 Rules に反する API 設計・実装案を提案してはならない。
変更が必要な場合は **理由・影響範囲・代替案** を必ず明示すること。
